{"ast":null,"code":"import*as THREE from'three';import FloorMaterial from'../Materials/Floor.js';export default class Floor{constructor(_options){// Options\nthis.debug=_options.debug;// Container\nthis.container=new THREE.Object3D();this.container.matrixAutoUpdate=false;// Geometry\nthis.geometry=new THREE.PlaneGeometry(2,2,10,10);// Colors\nthis.colors={};this.colors.topLeft='#f5883c';this.colors.topRight='#ff9043';this.colors.bottomRight='#fccf92';this.colors.bottomLeft='#f5aa58';// Material\nthis.material=new FloorMaterial();this.updateMaterial=()=>{const topLeft=new THREE.Color(this.colors.topLeft);const topRight=new THREE.Color(this.colors.topRight);const bottomRight=new THREE.Color(this.colors.bottomRight);const bottomLeft=new THREE.Color(this.colors.bottomLeft);topLeft.convertLinearToSRGB();topRight.convertLinearToSRGB();bottomRight.convertLinearToSRGB();bottomLeft.convertLinearToSRGB();const data=new Uint8Array([Math.round(bottomLeft.r*255),Math.round(bottomLeft.g*255),Math.round(bottomLeft.b*255),255,Math.round(bottomRight.r*255),Math.round(bottomRight.g*255),Math.round(bottomRight.b*255),255,Math.round(topLeft.r*255),Math.round(topLeft.g*255),Math.round(topLeft.b*255),255,Math.round(topRight.r*255),Math.round(topRight.g*255),Math.round(topRight.b*255),255]);this.backgroundTexture=new THREE.DataTexture(data,2,2);this.backgroundTexture.magFilter=THREE.LinearFilter;this.backgroundTexture.needsUpdate=true;this.material.uniforms.tBackground.value=this.backgroundTexture;};this.updateMaterial();// Mesh\nthis.mesh=new THREE.Mesh(this.geometry,this.material);this.mesh.frustumCulled=false;this.mesh.matrixAutoUpdate=false;this.mesh.updateMatrix();this.container.add(this.mesh);// Debug\nif(this.debug){const folder=this.debug.addFolder('floor');// folder.open()\nfolder.addColor(this.colors,'topLeft').onChange(this.updateMaterial);folder.addColor(this.colors,'topRight').onChange(this.updateMaterial);folder.addColor(this.colors,'bottomRight').onChange(this.updateMaterial);folder.addColor(this.colors,'bottomLeft').onChange(this.updateMaterial);}}}","map":{"version":3,"names":["THREE","FloorMaterial","Floor","constructor","_options","debug","container","Object3D","matrixAutoUpdate","geometry","PlaneGeometry","colors","topLeft","topRight","bottomRight","bottomLeft","material","updateMaterial","Color","convertLinearToSRGB","data","Uint8Array","Math","round","r","g","b","backgroundTexture","DataTexture","magFilter","LinearFilter","needsUpdate","uniforms","tBackground","value","mesh","Mesh","frustumCulled","updateMatrix","add","folder","addFolder","addColor","onChange"],"sources":["C:/laragon/www/folio-2019/src/javascript/World/Floor.js"],"sourcesContent":["import * as THREE from 'three'\r\nimport FloorMaterial from '../Materials/Floor.js'\r\n\r\nexport default class Floor\r\n{\r\n    constructor(_options)\r\n    {\r\n        // Options\r\n        this.debug = _options.debug\r\n\r\n        // Container\r\n        this.container = new THREE.Object3D()\r\n        this.container.matrixAutoUpdate = false\r\n\r\n        // Geometry\r\n        this.geometry = new THREE.PlaneGeometry(2, 2, 10, 10)\r\n\r\n        // Colors\r\n        this.colors = {}\r\n        this.colors.topLeft = '#f5883c'\r\n        this.colors.topRight = '#ff9043'\r\n        this.colors.bottomRight = '#fccf92'\r\n        this.colors.bottomLeft = '#f5aa58'\r\n\r\n        // Material\r\n        this.material = new FloorMaterial()\r\n\r\n        this.updateMaterial = () =>\r\n        {\r\n            const topLeft = new THREE.Color(this.colors.topLeft)\r\n            const topRight = new THREE.Color(this.colors.topRight)\r\n            const bottomRight = new THREE.Color(this.colors.bottomRight)\r\n            const bottomLeft = new THREE.Color(this.colors.bottomLeft)\r\n\r\n            topLeft.convertLinearToSRGB()\r\n            topRight.convertLinearToSRGB()\r\n            bottomRight.convertLinearToSRGB()\r\n            bottomLeft.convertLinearToSRGB()\r\n\r\n            const data = new Uint8Array([\r\n                Math.round(bottomLeft.r * 255), Math.round(bottomLeft.g * 255), Math.round(bottomLeft.b * 255), 255,\r\n                Math.round(bottomRight.r * 255), Math.round(bottomRight.g * 255), Math.round(bottomRight.b * 255), 255,\r\n                Math.round(topLeft.r * 255), Math.round(topLeft.g * 255), Math.round(topLeft.b * 255), 255,\r\n                Math.round(topRight.r * 255), Math.round(topRight.g * 255), Math.round(topRight.b * 255), 255\r\n            ])\r\n\r\n            this.backgroundTexture = new THREE.DataTexture(data, 2, 2)\r\n            this.backgroundTexture.magFilter = THREE.LinearFilter\r\n            this.backgroundTexture.needsUpdate = true\r\n\r\n            this.material.uniforms.tBackground.value = this.backgroundTexture\r\n        }\r\n\r\n        this.updateMaterial()\r\n\r\n        // Mesh\r\n        this.mesh = new THREE.Mesh(this.geometry, this.material)\r\n        this.mesh.frustumCulled = false\r\n        this.mesh.matrixAutoUpdate = false\r\n        this.mesh.updateMatrix()\r\n        this.container.add(this.mesh)\r\n\r\n        // Debug\r\n        if(this.debug)\r\n        {\r\n            const folder = this.debug.addFolder('floor')\r\n            // folder.open()\r\n\r\n            folder.addColor(this.colors, 'topLeft').onChange(this.updateMaterial)\r\n            folder.addColor(this.colors, 'topRight').onChange(this.updateMaterial)\r\n            folder.addColor(this.colors, 'bottomRight').onChange(this.updateMaterial)\r\n            folder.addColor(this.colors, 'bottomLeft').onChange(this.updateMaterial)\r\n        }\r\n    }\r\n}\r\n"],"mappings":"AAAA,MAAO,GAAK,CAAAA,KAAK,KAAM,OAAO,CAC9B,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CAEjD,cAAe,MAAM,CAAAC,KACrB,CACIC,WAAWA,CAACC,QAAQ,CACpB,CACI;AACA,IAAI,CAACC,KAAK,CAAGD,QAAQ,CAACC,KAAK,CAE3B;AACA,IAAI,CAACC,SAAS,CAAG,GAAI,CAAAN,KAAK,CAACO,QAAQ,CAAC,CAAC,CACrC,IAAI,CAACD,SAAS,CAACE,gBAAgB,CAAG,KAAK,CAEvC;AACA,IAAI,CAACC,QAAQ,CAAG,GAAI,CAAAT,KAAK,CAACU,aAAa,CAAC,CAAC,CAAE,CAAC,CAAE,EAAE,CAAE,EAAE,CAAC,CAErD;AACA,IAAI,CAACC,MAAM,CAAG,CAAC,CAAC,CAChB,IAAI,CAACA,MAAM,CAACC,OAAO,CAAG,SAAS,CAC/B,IAAI,CAACD,MAAM,CAACE,QAAQ,CAAG,SAAS,CAChC,IAAI,CAACF,MAAM,CAACG,WAAW,CAAG,SAAS,CACnC,IAAI,CAACH,MAAM,CAACI,UAAU,CAAG,SAAS,CAElC;AACA,IAAI,CAACC,QAAQ,CAAG,GAAI,CAAAf,aAAa,CAAC,CAAC,CAEnC,IAAI,CAACgB,cAAc,CAAG,IACtB,CACI,KAAM,CAAAL,OAAO,CAAG,GAAI,CAAAZ,KAAK,CAACkB,KAAK,CAAC,IAAI,CAACP,MAAM,CAACC,OAAO,CAAC,CACpD,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAb,KAAK,CAACkB,KAAK,CAAC,IAAI,CAACP,MAAM,CAACE,QAAQ,CAAC,CACtD,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAd,KAAK,CAACkB,KAAK,CAAC,IAAI,CAACP,MAAM,CAACG,WAAW,CAAC,CAC5D,KAAM,CAAAC,UAAU,CAAG,GAAI,CAAAf,KAAK,CAACkB,KAAK,CAAC,IAAI,CAACP,MAAM,CAACI,UAAU,CAAC,CAE1DH,OAAO,CAACO,mBAAmB,CAAC,CAAC,CAC7BN,QAAQ,CAACM,mBAAmB,CAAC,CAAC,CAC9BL,WAAW,CAACK,mBAAmB,CAAC,CAAC,CACjCJ,UAAU,CAACI,mBAAmB,CAAC,CAAC,CAEhC,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,UAAU,CAAC,CACxBC,IAAI,CAACC,KAAK,CAACR,UAAU,CAACS,CAAC,CAAG,GAAG,CAAC,CAAEF,IAAI,CAACC,KAAK,CAACR,UAAU,CAACU,CAAC,CAAG,GAAG,CAAC,CAAEH,IAAI,CAACC,KAAK,CAACR,UAAU,CAACW,CAAC,CAAG,GAAG,CAAC,CAAE,GAAG,CACnGJ,IAAI,CAACC,KAAK,CAACT,WAAW,CAACU,CAAC,CAAG,GAAG,CAAC,CAAEF,IAAI,CAACC,KAAK,CAACT,WAAW,CAACW,CAAC,CAAG,GAAG,CAAC,CAAEH,IAAI,CAACC,KAAK,CAACT,WAAW,CAACY,CAAC,CAAG,GAAG,CAAC,CAAE,GAAG,CACtGJ,IAAI,CAACC,KAAK,CAACX,OAAO,CAACY,CAAC,CAAG,GAAG,CAAC,CAAEF,IAAI,CAACC,KAAK,CAACX,OAAO,CAACa,CAAC,CAAG,GAAG,CAAC,CAAEH,IAAI,CAACC,KAAK,CAACX,OAAO,CAACc,CAAC,CAAG,GAAG,CAAC,CAAE,GAAG,CAC1FJ,IAAI,CAACC,KAAK,CAACV,QAAQ,CAACW,CAAC,CAAG,GAAG,CAAC,CAAEF,IAAI,CAACC,KAAK,CAACV,QAAQ,CAACY,CAAC,CAAG,GAAG,CAAC,CAAEH,IAAI,CAACC,KAAK,CAACV,QAAQ,CAACa,CAAC,CAAG,GAAG,CAAC,CAAE,GAAG,CAChG,CAAC,CAEF,IAAI,CAACC,iBAAiB,CAAG,GAAI,CAAA3B,KAAK,CAAC4B,WAAW,CAACR,IAAI,CAAE,CAAC,CAAE,CAAC,CAAC,CAC1D,IAAI,CAACO,iBAAiB,CAACE,SAAS,CAAG7B,KAAK,CAAC8B,YAAY,CACrD,IAAI,CAACH,iBAAiB,CAACI,WAAW,CAAG,IAAI,CAEzC,IAAI,CAACf,QAAQ,CAACgB,QAAQ,CAACC,WAAW,CAACC,KAAK,CAAG,IAAI,CAACP,iBAAiB,CACrE,CAAC,CAED,IAAI,CAACV,cAAc,CAAC,CAAC,CAErB;AACA,IAAI,CAACkB,IAAI,CAAG,GAAI,CAAAnC,KAAK,CAACoC,IAAI,CAAC,IAAI,CAAC3B,QAAQ,CAAE,IAAI,CAACO,QAAQ,CAAC,CACxD,IAAI,CAACmB,IAAI,CAACE,aAAa,CAAG,KAAK,CAC/B,IAAI,CAACF,IAAI,CAAC3B,gBAAgB,CAAG,KAAK,CAClC,IAAI,CAAC2B,IAAI,CAACG,YAAY,CAAC,CAAC,CACxB,IAAI,CAAChC,SAAS,CAACiC,GAAG,CAAC,IAAI,CAACJ,IAAI,CAAC,CAE7B;AACA,GAAG,IAAI,CAAC9B,KAAK,CACb,CACI,KAAM,CAAAmC,MAAM,CAAG,IAAI,CAACnC,KAAK,CAACoC,SAAS,CAAC,OAAO,CAAC,CAC5C;AAEAD,MAAM,CAACE,QAAQ,CAAC,IAAI,CAAC/B,MAAM,CAAE,SAAS,CAAC,CAACgC,QAAQ,CAAC,IAAI,CAAC1B,cAAc,CAAC,CACrEuB,MAAM,CAACE,QAAQ,CAAC,IAAI,CAAC/B,MAAM,CAAE,UAAU,CAAC,CAACgC,QAAQ,CAAC,IAAI,CAAC1B,cAAc,CAAC,CACtEuB,MAAM,CAACE,QAAQ,CAAC,IAAI,CAAC/B,MAAM,CAAE,aAAa,CAAC,CAACgC,QAAQ,CAAC,IAAI,CAAC1B,cAAc,CAAC,CACzEuB,MAAM,CAACE,QAAQ,CAAC,IAAI,CAAC/B,MAAM,CAAE,YAAY,CAAC,CAACgC,QAAQ,CAAC,IAAI,CAAC1B,cAAc,CAAC,CAC5E,CACJ,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}