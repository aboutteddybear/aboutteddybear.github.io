{"ast":null,"code":"import*as THREE from'three';import*as BufferGeometryUtils from'three/addons/utils/BufferGeometryUtils.js';export default class Objects{constructor(_options){// Options\nthis.time=_options.time;this.resources=_options.resources;this.materials=_options.materials;this.physics=_options.physics;this.shadows=_options.shadows;this.sounds=_options.sounds;this.debug=_options.debug;// Set up\nthis.container=new THREE.Object3D();this.container.matrixAutoUpdate=false;this.items=[];this.floorShadows=[];this.setParsers();this.setMerge();}setParsers(){this.parsers={};this.parsers.items=[// Shade\n{regex:/^shade([a-z]+)_?[0-9]{0,3}?/i,apply:(_mesh,_options)=>{// Find material\nconst match=_mesh.name.match(/^shade([a-z]+)_?[0-9]{0,3}?/i);const materialName=\"\".concat(match[1].substring(0,1).toLowerCase()).concat(match[1].substring(1));// PastalCase to camelCase\nlet material=this.materials.shades.items[materialName];// Default\nif(typeof material==='undefined'){material=new THREE.MeshNormalMaterial();}// Create clone mesh with new material\nconst mesh=_options.duplicated?_mesh.clone():_mesh;mesh.material=material;if(mesh.children.length){for(const _child of mesh.children){if(_child instanceof THREE.Mesh){_child.material=material;}}}return mesh;}},// Shade\n{regex:/^pure([a-z]+)_?[0-9]{0,3}?/i,apply:(_mesh,_options)=>{// Find material\nconst match=_mesh.name.match(/^pure([a-z]+)_?[0-9]{0,3}?/i);const materialName=match[1].toLowerCase();let material=this.materials.pures.items[materialName];// Default\nif(typeof material==='undefined'){material=new THREE.MeshNormalMaterial();}// Create clone mesh with new material\nconst mesh=_options.duplicated?_mesh.clone():_mesh;mesh.material=material;return mesh;}},// Floor\n{regex:/^floor_?[0-9]{0,3}?/i,apply:(_mesh,_options)=>{// Create floor manually because of missing UV\nconst geometry=new THREE.PlaneGeometry(_mesh.scale.x,_mesh.scale.y,10,10);const material=this.materials.items.floorShadow.clone();material.uniforms.tShadow.value=_options.floorShadowTexture;material.uniforms.uShadowColor.value=new THREE.Color(this.materials.items.floorShadow.shadowColor);material.uniforms.uAlpha.value=0;const mesh=new THREE.Mesh(geometry,material);mesh.matrixAutoUpdate=false;mesh.updateMatrix();this.floorShadows.push(mesh);return mesh;}}];// Default\nthis.parsers.default={};this.parsers.default.apply=_mesh=>{// Create clone mesh with normal material\nconst mesh=_mesh.clone();mesh.material=this.materials.shades.items.white;return mesh;};}setMerge(){this.merge={};this.merge.items={};this.merge.container=new THREE.Object3D();this.merge.container.matrixAutoUpdate=false;this.container.add(this.merge.container);this.merge.add=(_name,_mesh)=>{let mergeItem=this.merge.items[_name];// Create merge item if not found\nif(!mergeItem){mergeItem={};// Geometry\nmergeItem.geometry=new THREE.BufferGeometry();mergeItem.geometriesToMerge=[];// Material\nmergeItem.material=_mesh.material;mergeItem.material.side=THREE.DoubleSide;// Mesh\nmergeItem.mesh=new THREE.Mesh(mergeItem.geometry,mergeItem.material);this.merge.container.add(mergeItem.mesh);// Save\nthis.merge.items[_name]=mergeItem;}// Apply the object transform to the geometry and save it for later merge\nconst geometry=_mesh.geometry;_mesh.updateMatrixWorld();// Maybe not\ngeometry.applyMatrix(_mesh.matrixWorld);mergeItem.geometriesToMerge.push(geometry);};this.merge.applyMerge=()=>{for(const _mergeItemName in this.merge.items){const mergeItem=this.merge.items[_mergeItemName];mergeItem.geometry=BufferGeometryUtils.mergeGeometries(mergeItem.geometriesToMerge);// Should add original geometry\nmergeItem.mesh.geometry=mergeItem.geometry;}};this.merge.update=()=>{for(const _object of this.items){if(_object.shouldMerge){const children=[..._object.container.children];for(const _child of children){const materialName=_child.material.name;if(materialName!==''){this.merge.add(materialName,_child);// Remove from parent\n_object.container.remove(_child);}}// If no children, remove\n_object.shouldMerge=false;}}// Apply merge\nthis.merge.applyMerge();};}getConvertedMesh(_children){let _options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const container=new THREE.Object3D();const center=new THREE.Vector3();// Go through each base child\nconst baseChildren=[..._children];for(const _child of baseChildren){// Find center\nif(_child.name.match(/^center_?[0-9]{0,3}?/i)){center.set(_child.position.x,_child.position.y,_child.position.z);}if(_child instanceof THREE.Mesh){// Find parser and use default if not found\nlet parser=this.parsers.items.find(_item=>_child.name.match(_item.regex));if(typeof parser==='undefined'){parser=this.parsers.default;}// Create mesh by applying parser\nconst mesh=parser.apply(_child,_options);// Add to container\ncontainer.add(mesh);}}// Recenter\nif(center.length()>0){for(const _child of container.children){_child.position.sub(center);}container.position.add(center);}if(_options.mass&&_options.mass===0){container.matrixAutoUpdate=false;container.updateMatrix();}return container;}add(_options){const object={};object.merged=false;object.shouldMerge=_options.mass===0;// Offset\nconst offset=new THREE.Vector3();if(_options.offset){offset.copy(_options.offset);}// Rotation\nconst rotation=new THREE.Euler();if(_options.rotation){rotation.copy(_options.rotation);}// Sleep\nconst sleep=typeof _options.sleep==='undefined'?true:_options.sleep;// Container\nobject.container=this.getConvertedMesh(_options.base.children,_options);object.container.position.copy(offset);object.container.rotation.copy(rotation);this.container.add(object.container);// Deactivate matrix auto update\nif(_options.mass===0){object.container.matrixAutoUpdate=false;object.container.updateMatrix();for(const _child of object.container.children){_child.matrixAutoUpdate=false;_child.updateMatrix();}}// Create physics object\nobject.collision=this.physics.addObjectFromThree({meshes:[..._options.collision.children],offset,rotation,mass:_options.mass,sleep});for(const _child of object.container.children){_child.position.sub(object.collision.center);}// Sound\nif(_options.soundName){object.collision.body.addEventListener('collide',_event=>{const relativeVelocity=_event.contact.getImpactVelocityAlongNormal();this.sounds.play(_options.soundName,relativeVelocity);});}// Shadow\n// Add shadow\nif(_options.shadow){this.shadows.add(object.container,_options.shadow);}// Time tick event\nif(_options.mass>0){this.time.on('tick',()=>{object.container.position.copy(object.collision.body.position);object.container.quaternion.copy(object.collision.body.quaternion);});}// Save\nthis.items.push(object);return object;}}","map":{"version":3,"names":["THREE","BufferGeometryUtils","Objects","constructor","_options","time","resources","materials","physics","shadows","sounds","debug","container","Object3D","matrixAutoUpdate","items","floorShadows","setParsers","setMerge","parsers","regex","apply","_mesh","match","name","materialName","concat","substring","toLowerCase","material","shades","MeshNormalMaterial","mesh","duplicated","clone","children","length","_child","Mesh","pures","geometry","PlaneGeometry","scale","x","y","floorShadow","uniforms","tShadow","value","floorShadowTexture","uShadowColor","Color","shadowColor","uAlpha","updateMatrix","push","default","white","merge","add","_name","mergeItem","BufferGeometry","geometriesToMerge","side","DoubleSide","updateMatrixWorld","applyMatrix","matrixWorld","applyMerge","_mergeItemName","mergeGeometries","update","_object","shouldMerge","remove","getConvertedMesh","_children","arguments","undefined","center","Vector3","baseChildren","set","position","z","parser","find","_item","sub","mass","object","merged","offset","copy","rotation","Euler","sleep","base","collision","addObjectFromThree","meshes","soundName","body","addEventListener","_event","relativeVelocity","contact","getImpactVelocityAlongNormal","play","shadow","on","quaternion"],"sources":["C:/laragon/www/folio-2019/src/javascript/World/Objects.js"],"sourcesContent":["import * as THREE from 'three'\r\nimport * as BufferGeometryUtils from 'three/addons/utils/BufferGeometryUtils.js';\r\n\r\n\r\nexport default class Objects\r\n{\r\n    constructor(_options)\r\n    {\r\n        // Options\r\n        this.time = _options.time\r\n        this.resources = _options.resources\r\n        this.materials = _options.materials\r\n        this.physics = _options.physics\r\n        this.shadows = _options.shadows\r\n        this.sounds = _options.sounds\r\n        this.debug = _options.debug\r\n\r\n        // Set up\r\n        this.container = new THREE.Object3D()\r\n        this.container.matrixAutoUpdate = false\r\n\r\n        this.items = []\r\n        this.floorShadows = []\r\n\r\n        this.setParsers()\r\n        this.setMerge()\r\n    }\r\n\r\n    setParsers()\r\n    {\r\n        this.parsers = {}\r\n\r\n        this.parsers.items = [\r\n            // Shade\r\n            {\r\n                regex: /^shade([a-z]+)_?[0-9]{0,3}?/i,\r\n                apply: (_mesh, _options) =>\r\n                {\r\n                    // Find material\r\n                    const match = _mesh.name.match(/^shade([a-z]+)_?[0-9]{0,3}?/i)\r\n                    const materialName = `${match[1].substring(0, 1).toLowerCase()}${match[1].substring(1)}` // PastalCase to camelCase\r\n                    let material = this.materials.shades.items[materialName]\r\n\r\n                    // Default\r\n                    if(typeof material === 'undefined')\r\n                    {\r\n                        material = new THREE.MeshNormalMaterial()\r\n                    }\r\n\r\n                    // Create clone mesh with new material\r\n                    const mesh = _options.duplicated ? _mesh.clone() : _mesh\r\n                    mesh.material = material\r\n\r\n                    if(mesh.children.length)\r\n                    {\r\n                        for(const _child of mesh.children)\r\n                        {\r\n                            if(_child instanceof THREE.Mesh)\r\n                            {\r\n                                _child.material = material\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    return mesh\r\n                }\r\n            },\r\n\r\n            // Shade\r\n            {\r\n                regex: /^pure([a-z]+)_?[0-9]{0,3}?/i,\r\n                apply: (_mesh, _options) =>\r\n                {\r\n                    // Find material\r\n                    const match = _mesh.name.match(/^pure([a-z]+)_?[0-9]{0,3}?/i)\r\n                    const materialName = match[1].toLowerCase()\r\n                    let material = this.materials.pures.items[materialName]\r\n\r\n                    // Default\r\n                    if(typeof material === 'undefined')\r\n                    {\r\n                        material = new THREE.MeshNormalMaterial()\r\n                    }\r\n\r\n                    // Create clone mesh with new material\r\n                    const mesh = _options.duplicated ? _mesh.clone() : _mesh\r\n                    mesh.material = material\r\n\r\n                    return mesh\r\n                }\r\n            },\r\n\r\n            // Floor\r\n            {\r\n                regex: /^floor_?[0-9]{0,3}?/i,\r\n                apply: (_mesh, _options) =>\r\n                {\r\n                    // Create floor manually because of missing UV\r\n                    const geometry = new THREE.PlaneGeometry(_mesh.scale.x, _mesh.scale.y, 10, 10)\r\n                    const material = this.materials.items.floorShadow.clone()\r\n\r\n                    material.uniforms.tShadow.value = _options.floorShadowTexture\r\n                    material.uniforms.uShadowColor.value = new THREE.Color(this.materials.items.floorShadow.shadowColor)\r\n                    material.uniforms.uAlpha.value = 0\r\n\r\n                    const mesh = new THREE.Mesh(geometry, material)\r\n                    mesh.matrixAutoUpdate = false\r\n                    mesh.updateMatrix()\r\n\r\n                    this.floorShadows.push(mesh)\r\n\r\n                    return mesh\r\n                }\r\n            }\r\n        ]\r\n\r\n        // Default\r\n        this.parsers.default = {}\r\n        this.parsers.default.apply = (_mesh) =>\r\n        {\r\n            // Create clone mesh with normal material\r\n            const mesh = _mesh.clone()\r\n            mesh.material = this.materials.shades.items.white\r\n\r\n            return mesh\r\n        }\r\n    }\r\n\r\n    setMerge()\r\n    {\r\n        this.merge = {}\r\n        this.merge.items = {}\r\n\r\n        this.merge.container = new THREE.Object3D()\r\n        this.merge.container.matrixAutoUpdate = false\r\n        this.container.add(this.merge.container)\r\n\r\n        this.merge.add = (_name, _mesh) =>\r\n        {\r\n            let mergeItem = this.merge.items[_name]\r\n\r\n            // Create merge item if not found\r\n            if(!mergeItem)\r\n            {\r\n                mergeItem = {}\r\n\r\n                // Geometry\r\n                mergeItem.geometry = new THREE.BufferGeometry()\r\n                mergeItem.geometriesToMerge = []\r\n\r\n                // Material\r\n                mergeItem.material = _mesh.material\r\n                mergeItem.material.side = THREE.DoubleSide\r\n\r\n                // Mesh\r\n                mergeItem.mesh = new THREE.Mesh(mergeItem.geometry, mergeItem.material)\r\n                this.merge.container.add(mergeItem.mesh)\r\n\r\n                // Save\r\n                this.merge.items[_name] = mergeItem\r\n            }\r\n\r\n            // Apply the object transform to the geometry and save it for later merge\r\n            const geometry = _mesh.geometry\r\n            _mesh.updateMatrixWorld() // Maybe not\r\n            geometry.applyMatrix(_mesh.matrixWorld)\r\n\r\n            mergeItem.geometriesToMerge.push(geometry)\r\n        }\r\n\r\n        this.merge.applyMerge = () =>\r\n        {\r\n            for(const _mergeItemName in this.merge.items)\r\n            {\r\n                const mergeItem = this.merge.items[_mergeItemName]\r\n\r\n                mergeItem.geometry = BufferGeometryUtils.mergeGeometries(mergeItem.geometriesToMerge) // Should add original geometry\r\n                mergeItem.mesh.geometry = mergeItem.geometry\r\n            }\r\n        }\r\n\r\n        this.merge.update = () =>\r\n        {\r\n            for(const _object of this.items)\r\n            {\r\n                if(_object.shouldMerge)\r\n                {\r\n                    const children = [..._object.container.children]\r\n                    for(const _child of children)\r\n                    {\r\n                        const materialName = _child.material.name\r\n                        if(materialName !== '')\r\n                        {\r\n                            this.merge.add(materialName, _child)\r\n\r\n                            // Remove from parent\r\n                            _object.container.remove(_child)\r\n                        }\r\n                    }\r\n\r\n                    // If no children, remove\r\n\r\n                    _object.shouldMerge = false\r\n                }\r\n            }\r\n\r\n            // Apply merge\r\n            this.merge.applyMerge()\r\n        }\r\n    }\r\n\r\n    getConvertedMesh(_children, _options = {})\r\n    {\r\n        const container = new THREE.Object3D()\r\n        const center = new THREE.Vector3()\r\n\r\n        // Go through each base child\r\n        const baseChildren = [..._children]\r\n\r\n        for(const _child of baseChildren)\r\n        {\r\n            // Find center\r\n            if(_child.name.match(/^center_?[0-9]{0,3}?/i))\r\n            {\r\n                center.set(_child.position.x, _child.position.y, _child.position.z)\r\n            }\r\n\r\n            if(_child instanceof THREE.Mesh)\r\n            {\r\n                // Find parser and use default if not found\r\n                let parser = this.parsers.items.find((_item) => _child.name.match(_item.regex))\r\n                if(typeof parser === 'undefined')\r\n                {\r\n                    parser = this.parsers.default\r\n                }\r\n\r\n                // Create mesh by applying parser\r\n                const mesh = parser.apply(_child, _options)\r\n\r\n                // Add to container\r\n                container.add(mesh)\r\n            }\r\n        }\r\n\r\n        // Recenter\r\n        if(center.length() > 0)\r\n        {\r\n            for(const _child of container.children)\r\n            {\r\n                _child.position.sub(center)\r\n            }\r\n\r\n            container.position.add(center)\r\n        }\r\n\r\n        if(_options.mass && _options.mass === 0)\r\n        {\r\n            container.matrixAutoUpdate = false\r\n            container.updateMatrix()\r\n        }\r\n\r\n        return container\r\n    }\r\n\r\n    add(_options)\r\n    {\r\n        const object = {}\r\n\r\n        object.merged = false\r\n        object.shouldMerge = _options.mass === 0\r\n\r\n        // Offset\r\n        const offset = new THREE.Vector3()\r\n        if(_options.offset)\r\n        {\r\n            offset.copy(_options.offset)\r\n        }\r\n\r\n        // Rotation\r\n        const rotation = new THREE.Euler()\r\n        if(_options.rotation)\r\n        {\r\n            rotation.copy(_options.rotation)\r\n        }\r\n\r\n        // Sleep\r\n        const sleep = typeof _options.sleep === 'undefined' ? true : _options.sleep\r\n\r\n        // Container\r\n        object.container = this.getConvertedMesh(_options.base.children, _options)\r\n        object.container.position.copy(offset)\r\n        object.container.rotation.copy(rotation)\r\n        this.container.add(object.container)\r\n\r\n        // Deactivate matrix auto update\r\n        if(_options.mass === 0)\r\n        {\r\n            object.container.matrixAutoUpdate = false\r\n            object.container.updateMatrix()\r\n\r\n            for(const _child of object.container.children)\r\n            {\r\n                _child.matrixAutoUpdate = false\r\n                _child.updateMatrix()\r\n            }\r\n        }\r\n\r\n        // Create physics object\r\n        object.collision = this.physics.addObjectFromThree({\r\n            meshes: [..._options.collision.children],\r\n            offset,\r\n            rotation,\r\n            mass: _options.mass,\r\n            sleep\r\n        })\r\n\r\n        for(const _child of object.container.children)\r\n        {\r\n            _child.position.sub(object.collision.center)\r\n        }\r\n\r\n        // Sound\r\n        if(_options.soundName)\r\n        {\r\n            object.collision.body.addEventListener('collide', (_event) =>\r\n            {\r\n                const relativeVelocity = _event.contact.getImpactVelocityAlongNormal()\r\n                this.sounds.play(_options.soundName, relativeVelocity)\r\n            })\r\n        }\r\n\r\n        // Shadow\r\n        // Add shadow\r\n        if(_options.shadow)\r\n        {\r\n            this.shadows.add(object.container, _options.shadow)\r\n        }\r\n\r\n        // Time tick event\r\n        if(_options.mass > 0)\r\n        {\r\n            this.time.on('tick', () =>\r\n            {\r\n                object.container.position.copy(object.collision.body.position)\r\n                object.container.quaternion.copy(object.collision.body.quaternion)\r\n            })\r\n        }\r\n\r\n        // Save\r\n        this.items.push(object)\r\n\r\n        return object\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}