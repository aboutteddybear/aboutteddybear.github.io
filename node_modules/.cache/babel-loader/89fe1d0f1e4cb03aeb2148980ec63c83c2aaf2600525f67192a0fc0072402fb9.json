{"ast":null,"code":"import CANNON from'cannon';import*as THREE from'three';export default class Physics{constructor(_options){this.config=_options.config;this.debug=_options.debug;this.time=_options.time;this.sizes=_options.sizes;this.controls=_options.controls;this.sounds=_options.sounds;// Set up\nif(this.debug){this.debugFolder=this.debug.addFolder('physics');// this.debugFolder.open()\n}this.setWorld();this.setModels();this.setMaterials();this.setFloor();this.setCar();this.time.on('tick',()=>{this.world.step(this.time.delta/1000);});}setWorld(){this.world=new CANNON.World();this.world.gravity.set(0,0,-3.25*4);this.world.allowSleep=true;// this.world.broadphase = new CANNON.SAPBroadphase(this.world)\nthis.world.defaultContactMaterial.friction=0;this.world.defaultContactMaterial.restitution=0.2;// Debug\nif(this.debug){this.debugFolder.add(this.world.gravity,'z').step(0.001).min(-20).max(20).name('gravity');}}setModels(){this.models={};this.models.container=new THREE.Object3D();this.models.container.visible=false;this.models.materials={};this.models.materials.static=new THREE.MeshBasicMaterial({color:0x0000ff,wireframe:true});this.models.materials.dynamic=new THREE.MeshBasicMaterial({color:0xff0000,wireframe:true});this.models.materials.dynamicSleeping=new THREE.MeshBasicMaterial({color:0xffff00,wireframe:true});// Debug\nif(this.debug){this.debugFolder.add(this.models.container,'visible').name('modelsVisible');}}setMaterials(){this.materials={};// All materials\nthis.materials.items={};this.materials.items.floor=new CANNON.Material('floorMaterial');this.materials.items.dummy=new CANNON.Material('dummyMaterial');this.materials.items.wheel=new CANNON.Material('wheelMaterial');// Contact between materials\nthis.materials.contacts={};this.materials.contacts.floorDummy=new CANNON.ContactMaterial(this.materials.items.floor,this.materials.items.dummy,{friction:0.05,restitution:0.3,contactEquationStiffness:1000});this.world.addContactMaterial(this.materials.contacts.floorDummy);this.materials.contacts.dummyDummy=new CANNON.ContactMaterial(this.materials.items.dummy,this.materials.items.dummy,{friction:0.5,restitution:0.3,contactEquationStiffness:1000});this.world.addContactMaterial(this.materials.contacts.dummyDummy);this.materials.contacts.floorWheel=new CANNON.ContactMaterial(this.materials.items.floor,this.materials.items.wheel,{friction:0.3,restitution:0,contactEquationStiffness:1000});this.world.addContactMaterial(this.materials.contacts.floorWheel);}setFloor(){this.floor={};this.floor.body=new CANNON.Body({mass:0,shape:new CANNON.Plane(),material:this.materials.items.floor});// this.floor.body.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), - Math.PI * 0.5)\nthis.world.addBody(this.floor.body);}setCar(){var _this=this;this.car={};this.car.steering=0;this.car.accelerating=0;this.car.speed=0;this.car.worldForward=new CANNON.Vec3();this.car.angle=0;this.car.forwardSpeed=0;this.car.oldPosition=new CANNON.Vec3();this.car.goingForward=true;/**\r\n         * Options\r\n         */this.car.options={};this.car.options.chassisWidth=1.02;this.car.options.chassisHeight=1.16;this.car.options.chassisDepth=2.03;this.car.options.chassisOffset=new CANNON.Vec3(0,0,0.41);this.car.options.chassisMass=40;this.car.options.wheelFrontOffsetDepth=0.635;this.car.options.wheelBackOffsetDepth=-0.475;this.car.options.wheelOffsetWidth=0.39;this.car.options.wheelRadius=0.25;this.car.options.wheelHeight=0.24;this.car.options.wheelSuspensionStiffness=50;this.car.options.wheelSuspensionRestLength=0.1;this.car.options.wheelFrictionSlip=10;this.car.options.wheelDampingRelaxation=1.8;this.car.options.wheelDampingCompression=1.5;this.car.options.wheelMaxSuspensionForce=100000;this.car.options.wheelRollInfluence=0.01;this.car.options.wheelMaxSuspensionTravel=0.3;this.car.options.wheelCustomSlidingRotationalSpeed=-30;this.car.options.wheelMass=5;this.car.options.controlsSteeringSpeed=0.005*3;this.car.options.controlsSteeringMax=Math.PI*0.17;this.car.options.controlsSteeringQuad=false;this.car.options.controlsAcceleratinMaxSpeed=0.055*3/17;this.car.options.controlsAcceleratinMaxSpeedBoost=0.11*3/17;this.car.options.controlsAcceleratingSpeed=2*4*2;this.car.options.controlsAcceleratingSpeedBoost=3.5*4*2;this.car.options.controlsAcceleratingQuad=true;this.car.options.controlsBrakeStrength=0.45*3;/**\r\n         * Upsize down\r\n         */this.car.upsideDown={};this.car.upsideDown.state='watching';// 'wathing' | 'pending' | 'turning'\nthis.car.upsideDown.pendingTimeout=null;this.car.upsideDown.turningTimeout=null;/**\r\n         * Jump\r\n         */this.car.jump=function(){let _toReturn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;let _strength=arguments.length>1&&arguments[1]!==undefined?arguments[1]:150;let worldPosition=_this.car.chassis.body.position;worldPosition=worldPosition.vadd(new CANNON.Vec3(_toReturn?0.1:0,0,0));_this.car.chassis.body.applyImpulse(new CANNON.Vec3(0,0,_strength),worldPosition);};/**\r\n         * Create method\r\n         */this.car.create=()=>{/**\r\n             * Chassis\r\n             */this.car.chassis={};this.car.chassis.shape=new CANNON.Box(new CANNON.Vec3(this.car.options.chassisDepth*0.5,this.car.options.chassisWidth*0.5,this.car.options.chassisHeight*0.5));this.car.chassis.body=new CANNON.Body({mass:this.car.options.chassisMass});this.car.chassis.body.allowSleep=false;this.car.chassis.body.position.set(0,0,12);this.car.chassis.body.sleep();this.car.chassis.body.addShape(this.car.chassis.shape,this.car.options.chassisOffset);this.car.chassis.body.quaternion.setFromAxisAngle(new CANNON.Vec3(0,0,1),-Math.PI*0.5);/**\r\n             * Sound\r\n             */this.car.chassis.body.addEventListener('collide',_event=>{if(_event.body.mass===0){const relativeVelocity=_event.contact.getImpactVelocityAlongNormal();this.sounds.play('carHit',relativeVelocity);}});/**\r\n             * Vehicle\r\n             */this.car.vehicle=new CANNON.RaycastVehicle({chassisBody:this.car.chassis.body});/**\r\n             * Wheel\r\n             */this.car.wheels={};this.car.wheels.options={radius:this.car.options.wheelRadius,height:this.car.options.wheelHeight,suspensionStiffness:this.car.options.wheelSuspensionStiffness,suspensionRestLength:this.car.options.wheelSuspensionRestLength,frictionSlip:this.car.options.wheelFrictionSlip,dampingRelaxation:this.car.options.wheelDampingRelaxation,dampingCompression:this.car.options.wheelDampingCompression,maxSuspensionForce:this.car.options.wheelMaxSuspensionForce,rollInfluence:this.car.options.wheelRollInfluence,maxSuspensionTravel:this.car.options.wheelMaxSuspensionTravel,customSlidingRotationalSpeed:this.car.options.wheelCustomSlidingRotationalSpeed,useCustomSlidingRotationalSpeed:true,directionLocal:new CANNON.Vec3(0,0,-1),axleLocal:new CANNON.Vec3(0,1,0),chassisConnectionPointLocal:new CANNON.Vec3(1,1,0)// Will be changed for each wheel\n};// Front left\nthis.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelFrontOffsetDepth,this.car.options.wheelOffsetWidth,0);this.car.vehicle.addWheel(this.car.wheels.options);// Front right\nthis.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelFrontOffsetDepth,-this.car.options.wheelOffsetWidth,0);this.car.vehicle.addWheel(this.car.wheels.options);// Back left\nthis.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelBackOffsetDepth,this.car.options.wheelOffsetWidth,0);this.car.vehicle.addWheel(this.car.wheels.options);// Back right\nthis.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelBackOffsetDepth,-this.car.options.wheelOffsetWidth,0);this.car.vehicle.addWheel(this.car.wheels.options);this.car.vehicle.addToWorld(this.world);this.car.wheels.indexes={};this.car.wheels.indexes.frontLeft=0;this.car.wheels.indexes.frontRight=1;this.car.wheels.indexes.backLeft=2;this.car.wheels.indexes.backRight=3;this.car.wheels.bodies=[];for(const _wheelInfos of this.car.vehicle.wheelInfos){const shape=new CANNON.Cylinder(_wheelInfos.radius,_wheelInfos.radius,this.car.wheels.options.height,20);const body=new CANNON.Body({mass:this.car.options.wheelMass,material:this.materials.items.wheel});const quaternion=new CANNON.Quaternion();quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),Math.PI/2);body.type=CANNON.Body.KINEMATIC;body.addShape(shape,new CANNON.Vec3(),quaternion);this.car.wheels.bodies.push(body);}/**\r\n             * Model\r\n             */this.car.model={};this.car.model.container=new THREE.Object3D();this.models.container.add(this.car.model.container);this.car.model.material=new THREE.MeshBasicMaterial({color:0xffffff,wireframe:true});this.car.model.chassis=new THREE.Mesh(new THREE.BoxGeometry(this.car.options.chassisDepth,this.car.options.chassisWidth,this.car.options.chassisHeight),this.car.model.material);this.car.model.container.add(this.car.model.chassis);this.car.model.wheels=[];const wheelGeometry=new THREE.CylinderGeometry(this.car.options.wheelRadius,this.car.options.wheelRadius,this.car.options.wheelHeight,8,1);for(let i=0;i<4;i++){const wheel=new THREE.Mesh(wheelGeometry,this.car.model.material);this.car.model.container.add(wheel);this.car.model.wheels.push(wheel);}};/**\r\n         * Destroy method\r\n         */this.car.destroy=()=>{this.car.vehicle.removeFromWorld(this.world);this.models.container.remove(this.car.model.container);};/**\r\n         * Recreate method\r\n         */this.car.recreate=()=>{this.car.destroy();this.car.create();this.car.chassis.body.wakeUp();};/**\r\n         * Brake\r\n         */this.car.brake=()=>{this.car.vehicle.setBrake(1,0);this.car.vehicle.setBrake(1,1);this.car.vehicle.setBrake(1,2);this.car.vehicle.setBrake(1,3);};/**\r\n         * Unbrake\r\n         */this.car.unbrake=()=>{this.car.vehicle.setBrake(0,0);this.car.vehicle.setBrake(0,1);this.car.vehicle.setBrake(0,2);this.car.vehicle.setBrake(0,3);};/**\r\n         * Actions\r\n         */this.controls.on('action',_name=>{switch(_name){case'reset':this.car.recreate();break;}});/**\r\n         * Cannon tick\r\n         */this.world.addEventListener('postStep',()=>{// Update speed\nlet positionDelta=new CANNON.Vec3();positionDelta=positionDelta.copy(this.car.chassis.body.position);positionDelta=positionDelta.vsub(this.car.oldPosition);this.car.oldPosition.copy(this.car.chassis.body.position);this.car.speed=positionDelta.length()/this.time.delta;// Update forward\nconst localForward=new CANNON.Vec3(1,0,0);this.car.chassis.body.vectorToWorldFrame(localForward,this.car.worldForward);this.car.angle=Math.atan2(this.car.worldForward.y,this.car.worldForward.x);this.car.forwardSpeed=this.car.worldForward.dot(positionDelta);this.car.goingForward=this.car.forwardSpeed>0;// Updise down\nconst localUp=new CANNON.Vec3(0,0,1);const worldUp=new CANNON.Vec3();this.car.chassis.body.vectorToWorldFrame(localUp,worldUp);if(worldUp.dot(localUp)<0.5){if(this.car.upsideDown.state==='watching'){this.car.upsideDown.state='pending';this.car.upsideDown.pendingTimeout=window.setTimeout(()=>{this.car.upsideDown.state='turning';this.car.jump(true);this.car.upsideDown.turningTimeout=window.setTimeout(()=>{this.car.upsideDown.state='watching';},1000);},1000);}}else{if(this.car.upsideDown.state==='pending'){this.car.upsideDown.state='watching';window.clearTimeout(this.car.upsideDown.pendingTimeout);}}// Update wheel bodies\nfor(let i=0;i<this.car.vehicle.wheelInfos.length;i++){this.car.vehicle.updateWheelTransform(i);const transform=this.car.vehicle.wheelInfos[i].worldTransform;this.car.wheels.bodies[i].position.copy(transform.position);this.car.wheels.bodies[i].quaternion.copy(transform.quaternion);// Rotate the wheels on the right\nif(i===1||i===3){const rotationQuaternion=new CANNON.Quaternion(0,0,0,1);rotationQuaternion.setFromAxisAngle(new CANNON.Vec3(0,0,1),Math.PI);this.car.wheels.bodies[i].quaternion=this.car.wheels.bodies[i].quaternion.mult(rotationQuaternion);}}// Slow down back\nif(!this.controls.actions.up&&!this.controls.actions.down){let slowDownForce=this.car.worldForward.clone();if(this.car.goingForward){slowDownForce=slowDownForce.negate();}slowDownForce=slowDownForce.scale(this.car.chassis.body.velocity.length()*0.1);this.car.chassis.body.applyImpulse(slowDownForce,this.car.chassis.body.position);}});/**\r\n         * Time tick\r\n         */this.time.on('tick',()=>{/**\r\n             * Body\r\n             */// Update chassis model\nthis.car.model.chassis.position.copy(this.car.chassis.body.position).add(this.car.options.chassisOffset);this.car.model.chassis.quaternion.copy(this.car.chassis.body.quaternion);// Update wheel models\nfor(const _wheelKey in this.car.wheels.bodies){const wheelBody=this.car.wheels.bodies[_wheelKey];const wheelMesh=this.car.model.wheels[_wheelKey];wheelMesh.position.copy(wheelBody.position);wheelMesh.quaternion.copy(wheelBody.quaternion);}/**\r\n             * Steering\r\n             */if(this.controls.touch){let deltaAngle=0;if(this.controls.touch.joystick.active){// Calculate delta between joystick and car angles\ndeltaAngle=(this.controls.touch.joystick.angle.value-this.car.angle+Math.PI)%(Math.PI*2)-Math.PI;deltaAngle=deltaAngle<-Math.PI?deltaAngle+Math.PI*2:deltaAngle;}// Update steering directly\nconst goingForward=Math.abs(this.car.forwardSpeed)<0.01?true:this.car.goingForward;this.car.steering=deltaAngle*(goingForward?-1:1);// Clamp steer\nif(Math.abs(this.car.steering)>this.car.options.controlsSteeringMax){this.car.steering=Math.sign(this.car.steering)*this.car.options.controlsSteeringMax;}}if(!this.controls.touch||!this.controls.touch.joystick.active){const steerStrength=this.time.delta*this.car.options.controlsSteeringSpeed;// Steer right\nif(this.controls.actions.right){this.car.steering+=steerStrength;}// Steer left\nelse if(this.controls.actions.left){this.car.steering-=steerStrength;}// Steer center\nelse{if(Math.abs(this.car.steering)>steerStrength){this.car.steering-=steerStrength*Math.sign(this.car.steering);}else{this.car.steering=0;}}// Clamp steer\nif(Math.abs(this.car.steering)>this.car.options.controlsSteeringMax){this.car.steering=Math.sign(this.car.steering)*this.car.options.controlsSteeringMax;}}// Update wheels\nthis.car.vehicle.setSteeringValue(-this.car.steering,this.car.wheels.indexes.frontLeft);this.car.vehicle.setSteeringValue(-this.car.steering,this.car.wheels.indexes.frontRight);if(this.car.options.controlsSteeringQuad){this.car.vehicle.setSteeringValue(this.car.steering,this.car.wheels.indexes.backLeft);this.car.vehicle.setSteeringValue(this.car.steering,this.car.wheels.indexes.backRight);}/**\r\n             * Accelerate\r\n             */const accelerationSpeed=this.controls.actions.boost?this.car.options.controlsAcceleratingSpeedBoost:this.car.options.controlsAcceleratingSpeed;const accelerateStrength=17*accelerationSpeed;const controlsAcceleratinMaxSpeed=this.controls.actions.boost?this.car.options.controlsAcceleratinMaxSpeedBoost:this.car.options.controlsAcceleratinMaxSpeed;// Accelerate up\nif(this.controls.actions.up){if(this.car.speed<controlsAcceleratinMaxSpeed||!this.car.goingForward){this.car.accelerating=accelerateStrength;}else{this.car.accelerating=0;}}// Accelerate Down\nelse if(this.controls.actions.down){if(this.car.speed<controlsAcceleratinMaxSpeed||this.car.goingForward){this.car.accelerating=-accelerateStrength;}else{this.car.accelerating=0;}}else{this.car.accelerating=0;}this.car.vehicle.applyEngineForce(-this.car.accelerating,this.car.wheels.indexes.backLeft);this.car.vehicle.applyEngineForce(-this.car.accelerating,this.car.wheels.indexes.backRight);if(this.car.options.controlsSteeringQuad){this.car.vehicle.applyEngineForce(-this.car.accelerating,this.car.wheels.indexes.frontLeft);this.car.vehicle.applyEngineForce(-this.car.accelerating,this.car.wheels.indexes.frontRight);}/**\r\n             * Brake\r\n             */if(this.controls.actions.brake){this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength,0);this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength,1);this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength,2);this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength,3);}else{this.car.vehicle.setBrake(0,0);this.car.vehicle.setBrake(0,1);this.car.vehicle.setBrake(0,2);this.car.vehicle.setBrake(0,3);}});// Create the initial car\nthis.car.create();// Debug\nif(this.debug){this.car.debugFolder=this.debugFolder.addFolder('car');this.car.debugFolder.open();this.car.debugFolder.add(this.car.options,'chassisWidth').step(0.001).min(0).max(5).name('chassisWidth').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'chassisHeight').step(0.001).min(0).max(5).name('chassisHeight').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'chassisDepth').step(0.001).min(0).max(5).name('chassisDepth').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options.chassisOffset,'z').step(0.001).min(0).max(5).name('chassisOffset').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'chassisMass').step(0.001).min(0).max(1000).name('chassisMass').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelFrontOffsetDepth').step(0.001).min(0).max(5).name('wheelFrontOffsetDepth').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelBackOffsetDepth').step(0.001).min(-5).max(0).name('wheelBackOffsetDepth').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelOffsetWidth').step(0.001).min(0).max(5).name('wheelOffsetWidth').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelRadius').step(0.001).min(0).max(2).name('wheelRadius').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelHeight').step(0.001).min(0).max(2).name('wheelHeight').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelSuspensionStiffness').step(0.001).min(0).max(300).name('wheelSuspensionStiffness').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelSuspensionRestLength').step(0.001).min(0).max(5).name('wheelSuspensionRestLength').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelFrictionSlip').step(0.001).min(0).max(30).name('wheelFrictionSlip').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelDampingRelaxation').step(0.001).min(0).max(30).name('wheelDampingRelaxation').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelDampingCompression').step(0.001).min(0).max(30).name('wheelDampingCompression').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelMaxSuspensionForce').step(0.001).min(0).max(1000000).name('wheelMaxSuspensionForce').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelRollInfluence').step(0.001).min(0).max(1).name('wheelRollInfluence').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelMaxSuspensionTravel').step(0.001).min(0).max(5).name('wheelMaxSuspensionTravel').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelCustomSlidingRotationalSpeed').step(0.001).min(-45).max(45).name('wheelCustomSlidingRotationalSpeed').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'wheelMass').step(0.001).min(0).max(1000).name('wheelMass').onFinishChange(this.car.recreate);this.car.debugFolder.add(this.car.options,'controlsSteeringSpeed').step(0.001).min(0).max(0.1).name('controlsSteeringSpeed');this.car.debugFolder.add(this.car.options,'controlsSteeringMax').step(0.001).min(0).max(Math.PI*0.5).name('controlsSteeringMax');this.car.debugFolder.add(this.car.options,'controlsSteeringQuad').name('controlsSteeringQuad');this.car.debugFolder.add(this.car.options,'controlsAcceleratingSpeed').step(0.001).min(0).max(30).name('controlsAcceleratingSpeed');this.car.debugFolder.add(this.car.options,'controlsAcceleratingSpeedBoost').step(0.001).min(0).max(30).name('controlsAcceleratingSpeedBoost');this.car.debugFolder.add(this.car.options,'controlsAcceleratingQuad').name('controlsAcceleratingQuad');this.car.debugFolder.add(this.car.options,'controlsBrakeStrength').step(0.001).min(0).max(5).name('controlsBrakeStrength');this.car.debugFolder.add(this.car,'recreate');this.car.debugFolder.add(this.car,'jump');}}addObjectFromThree(_options){// Set up\nconst collision={};collision.model={};collision.model.meshes=[];collision.model.container=new THREE.Object3D();this.models.container.add(collision.model.container);collision.children=[];// Material\nconst bodyMaterial=this.materials.items.dummy;// Body\ncollision.body=new CANNON.Body({position:new CANNON.Vec3(_options.offset.x,_options.offset.y,_options.offset.z),mass:_options.mass,material:bodyMaterial});collision.body.allowSleep=true;collision.body.sleepSpeedLimit=0.01;if(_options.sleep){collision.body.sleep();}this.world.addBody(collision.body);// Rotation\nif(_options.rotation){const rotationQuaternion=new CANNON.Quaternion();rotationQuaternion.setFromEuler(_options.rotation.x,_options.rotation.y,_options.rotation.z,_options.rotation.order);collision.body.quaternion=collision.body.quaternion.mult(rotationQuaternion);}// Center\ncollision.center=new CANNON.Vec3(0,0,0);// Shapes\nconst shapes=[];// Each mesh\nfor(let i=0;i<_options.meshes.length;i++){const mesh=_options.meshes[i];// Define shape\nlet shape=null;if(mesh.name.match(/^cube_?[0-9]{0,3}?|box[0-9]{0,3}?$/i)){shape='box';}else if(mesh.name.match(/^cylinder_?[0-9]{0,3}?$/i)){shape='cylinder';}else if(mesh.name.match(/^sphere_?[0-9]{0,3}?$/i)){shape='sphere';}else if(mesh.name.match(/^center_?[0-9]{0,3}?$/i)){shape='center';}// Shape is the center\nif(shape==='center'){collision.center.set(mesh.position.x,mesh.position.y,mesh.position.z);}// Other shape\nelse if(shape){// Geometry\nlet shapeGeometry=null;if(shape==='cylinder'){shapeGeometry=new CANNON.Cylinder(mesh.scale.x,mesh.scale.x,mesh.scale.z,8);}else if(shape==='box'){const halfExtents=new CANNON.Vec3(mesh.scale.x*0.5,mesh.scale.y*0.5,mesh.scale.z*0.5);shapeGeometry=new CANNON.Box(halfExtents);}else if(shape==='sphere'){shapeGeometry=new CANNON.Sphere(mesh.scale.x);}// Position\nconst shapePosition=new CANNON.Vec3(mesh.position.x,mesh.position.y,mesh.position.z);// Quaternion\nconst shapeQuaternion=new CANNON.Quaternion(mesh.quaternion.x,mesh.quaternion.y,mesh.quaternion.z,mesh.quaternion.w);if(shape==='cylinder'){// Rotate cylinder\n// shapeQuaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), - Math.PI * 0.5)\n}// Save\nshapes.push({shapeGeometry,shapePosition,shapeQuaternion});// Create model object\nlet modelGeometry=null;if(shape==='cylinder'){modelGeometry=new THREE.CylinderGeometry(1,1,1,8,1);modelGeometry.rotateX(Math.PI*0.5);}else if(shape==='box'){modelGeometry=new THREE.BoxGeometry(1,1,1);}else if(shape==='sphere'){modelGeometry=new THREE.SphereGeometry(1,8,8);}const modelMesh=new THREE.Mesh(modelGeometry,this.models.materials[_options.mass===0?'static':'dynamic']);modelMesh.position.copy(mesh.position);modelMesh.scale.copy(mesh.scale);modelMesh.quaternion.copy(mesh.quaternion);collision.model.meshes.push(modelMesh);}}// Update meshes to match center\nfor(const _mesh of collision.model.meshes){_mesh.position.x-=collision.center.x;_mesh.position.y-=collision.center.y;_mesh.position.z-=collision.center.z;collision.model.container.add(_mesh);}// Update shapes to match center\nfor(const _shape of shapes){// Create physic object\n_shape.shapePosition.x-=collision.center.x;_shape.shapePosition.y-=collision.center.y;_shape.shapePosition.z-=collision.center.z;collision.body.addShape(_shape.shapeGeometry,_shape.shapePosition,_shape.shapeQuaternion);}// Update body to match center\ncollision.body.position.x+=collision.center.x;collision.body.position.y+=collision.center.y;collision.body.position.z+=collision.center.z;// Save origin\ncollision.origin={};collision.origin.position=collision.body.position.clone();collision.origin.quaternion=collision.body.quaternion.clone();collision.origin.sleep=_options.sleep;// Time tick update\nthis.time.on('tick',()=>{collision.model.container.position.set(collision.body.position.x,collision.body.position.y,collision.body.position.z);collision.model.container.quaternion.set(collision.body.quaternion.x,collision.body.quaternion.y,collision.body.quaternion.z,collision.body.quaternion.w);if(this.models.container.visible&&_options.mass>0){for(const _mesh of collision.model.container.children){_mesh.material=collision.body.sleepState===2?this.models.materials.dynamicSleeping:this.models.materials.dynamic;}}});// Reset\ncollision.reset=()=>{collision.body.position.copy(collision.origin.position);collision.body.quaternion.copy(collision.origin.quaternion);if(collision.origin.sleep){collision.body.sleep();}};return collision;}}","map":{"version":3,"names":["CANNON","THREE","Physics","constructor","_options","config","debug","time","sizes","controls","sounds","debugFolder","addFolder","setWorld","setModels","setMaterials","setFloor","setCar","on","world","step","delta","World","gravity","set","allowSleep","defaultContactMaterial","friction","restitution","add","min","max","name","models","container","Object3D","visible","materials","static","MeshBasicMaterial","color","wireframe","dynamic","dynamicSleeping","items","floor","Material","dummy","wheel","contacts","floorDummy","ContactMaterial","contactEquationStiffness","addContactMaterial","dummyDummy","floorWheel","body","Body","mass","shape","Plane","material","addBody","_this","car","steering","accelerating","speed","worldForward","Vec3","angle","forwardSpeed","oldPosition","goingForward","options","chassisWidth","chassisHeight","chassisDepth","chassisOffset","chassisMass","wheelFrontOffsetDepth","wheelBackOffsetDepth","wheelOffsetWidth","wheelRadius","wheelHeight","wheelSuspensionStiffness","wheelSuspensionRestLength","wheelFrictionSlip","wheelDampingRelaxation","wheelDampingCompression","wheelMaxSuspensionForce","wheelRollInfluence","wheelMaxSuspensionTravel","wheelCustomSlidingRotationalSpeed","wheelMass","controlsSteeringSpeed","controlsSteeringMax","Math","PI","controlsSteeringQuad","controlsAcceleratinMaxSpeed","controlsAcceleratinMaxSpeedBoost","controlsAcceleratingSpeed","controlsAcceleratingSpeedBoost","controlsAcceleratingQuad","controlsBrakeStrength","upsideDown","state","pendingTimeout","turningTimeout","jump","_toReturn","arguments","length","undefined","_strength","worldPosition","chassis","position","vadd","applyImpulse","create","Box","sleep","addShape","quaternion","setFromAxisAngle","addEventListener","_event","relativeVelocity","contact","getImpactVelocityAlongNormal","play","vehicle","RaycastVehicle","chassisBody","wheels","radius","height","suspensionStiffness","suspensionRestLength","frictionSlip","dampingRelaxation","dampingCompression","maxSuspensionForce","rollInfluence","maxSuspensionTravel","customSlidingRotationalSpeed","useCustomSlidingRotationalSpeed","directionLocal","axleLocal","chassisConnectionPointLocal","addWheel","addToWorld","indexes","frontLeft","frontRight","backLeft","backRight","bodies","_wheelInfos","wheelInfos","Cylinder","Quaternion","type","KINEMATIC","push","model","Mesh","BoxGeometry","wheelGeometry","CylinderGeometry","i","destroy","removeFromWorld","remove","recreate","wakeUp","brake","setBrake","unbrake","_name","positionDelta","copy","vsub","localForward","vectorToWorldFrame","atan2","y","x","dot","localUp","worldUp","window","setTimeout","clearTimeout","updateWheelTransform","transform","worldTransform","rotationQuaternion","mult","actions","up","down","slowDownForce","clone","negate","scale","velocity","_wheelKey","wheelBody","wheelMesh","touch","deltaAngle","joystick","active","value","abs","sign","steerStrength","right","left","setSteeringValue","accelerationSpeed","boost","accelerateStrength","applyEngineForce","open","onFinishChange","addObjectFromThree","collision","meshes","children","bodyMaterial","offset","z","sleepSpeedLimit","rotation","setFromEuler","order","center","shapes","mesh","match","shapeGeometry","halfExtents","Sphere","shapePosition","shapeQuaternion","w","modelGeometry","rotateX","SphereGeometry","modelMesh","_mesh","_shape","origin","sleepState","reset"],"sources":["C:/laragon/www/folio-2019/src/javascript/World/Physics.js"],"sourcesContent":["import CANNON from 'cannon'\r\nimport * as THREE from 'three'\r\n\r\nexport default class Physics\r\n{\r\n    constructor(_options)\r\n    {\r\n        this.config = _options.config\r\n        this.debug = _options.debug\r\n        this.time = _options.time\r\n        this.sizes = _options.sizes\r\n        this.controls = _options.controls\r\n        this.sounds = _options.sounds\r\n\r\n        // Set up\r\n        if(this.debug)\r\n        {\r\n            this.debugFolder = this.debug.addFolder('physics')\r\n            // this.debugFolder.open()\r\n        }\r\n\r\n        this.setWorld()\r\n        this.setModels()\r\n        this.setMaterials()\r\n        this.setFloor()\r\n        this.setCar()\r\n\r\n        this.time.on('tick', () =>\r\n        {\r\n            this.world.step(this.time.delta / 1000)\r\n        })\r\n    }\r\n\r\n    setWorld()\r\n    {\r\n        this.world = new CANNON.World()\r\n        this.world.gravity.set(0, 0, - 3.25 * 4)\r\n        this.world.allowSleep = true\r\n        // this.world.broadphase = new CANNON.SAPBroadphase(this.world)\r\n        this.world.defaultContactMaterial.friction = 0\r\n        this.world.defaultContactMaterial.restitution = 0.2\r\n\r\n        // Debug\r\n        if(this.debug)\r\n        {\r\n            this.debugFolder.add(this.world.gravity, 'z').step(0.001).min(- 20).max(20).name('gravity')\r\n        }\r\n    }\r\n\r\n    setModels()\r\n    {\r\n        this.models = {}\r\n        this.models.container = new THREE.Object3D()\r\n        this.models.container.visible = false\r\n        this.models.materials = {}\r\n        this.models.materials.static = new THREE.MeshBasicMaterial({ color: 0x0000ff, wireframe: true })\r\n        this.models.materials.dynamic = new THREE.MeshBasicMaterial({ color: 0xff0000, wireframe: true })\r\n        this.models.materials.dynamicSleeping = new THREE.MeshBasicMaterial({ color: 0xffff00, wireframe: true })\r\n\r\n        // Debug\r\n        if(this.debug)\r\n        {\r\n            this.debugFolder.add(this.models.container, 'visible').name('modelsVisible')\r\n        }\r\n    }\r\n\r\n    setMaterials()\r\n    {\r\n        this.materials = {}\r\n\r\n        // All materials\r\n        this.materials.items = {}\r\n        this.materials.items.floor = new CANNON.Material('floorMaterial')\r\n        this.materials.items.dummy = new CANNON.Material('dummyMaterial')\r\n        this.materials.items.wheel = new CANNON.Material('wheelMaterial')\r\n\r\n        // Contact between materials\r\n        this.materials.contacts = {}\r\n\r\n        this.materials.contacts.floorDummy = new CANNON.ContactMaterial(this.materials.items.floor, this.materials.items.dummy, { friction: 0.05, restitution: 0.3, contactEquationStiffness: 1000 })\r\n        this.world.addContactMaterial(this.materials.contacts.floorDummy)\r\n\r\n        this.materials.contacts.dummyDummy = new CANNON.ContactMaterial(this.materials.items.dummy, this.materials.items.dummy, { friction: 0.5, restitution: 0.3, contactEquationStiffness: 1000 })\r\n        this.world.addContactMaterial(this.materials.contacts.dummyDummy)\r\n\r\n        this.materials.contacts.floorWheel = new CANNON.ContactMaterial(this.materials.items.floor, this.materials.items.wheel, { friction: 0.3, restitution: 0, contactEquationStiffness: 1000 })\r\n        this.world.addContactMaterial(this.materials.contacts.floorWheel)\r\n    }\r\n\r\n    setFloor()\r\n    {\r\n        this.floor = {}\r\n        this.floor.body = new CANNON.Body({\r\n            mass: 0,\r\n            shape: new CANNON.Plane(),\r\n            material: this.materials.items.floor\r\n        })\r\n\r\n        // this.floor.body.quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), - Math.PI * 0.5)\r\n\r\n        this.world.addBody(this.floor.body)\r\n    }\r\n\r\n    setCar()\r\n    {\r\n        this.car = {}\r\n\r\n        this.car.steering = 0\r\n        this.car.accelerating = 0\r\n        this.car.speed = 0\r\n        this.car.worldForward = new CANNON.Vec3()\r\n        this.car.angle = 0\r\n        this.car.forwardSpeed = 0\r\n        this.car.oldPosition = new CANNON.Vec3()\r\n        this.car.goingForward = true\r\n\r\n        /**\r\n         * Options\r\n         */\r\n        this.car.options = {}\r\n        this.car.options.chassisWidth = 1.02\r\n        this.car.options.chassisHeight = 1.16\r\n        this.car.options.chassisDepth = 2.03\r\n        this.car.options.chassisOffset = new CANNON.Vec3(0, 0, 0.41)\r\n        this.car.options.chassisMass = 40\r\n        this.car.options.wheelFrontOffsetDepth = 0.635\r\n        this.car.options.wheelBackOffsetDepth = - 0.475\r\n        this.car.options.wheelOffsetWidth = 0.39\r\n        this.car.options.wheelRadius = 0.25\r\n        this.car.options.wheelHeight = 0.24\r\n        this.car.options.wheelSuspensionStiffness = 50\r\n        this.car.options.wheelSuspensionRestLength = 0.1\r\n        this.car.options.wheelFrictionSlip = 10\r\n        this.car.options.wheelDampingRelaxation = 1.8\r\n        this.car.options.wheelDampingCompression = 1.5\r\n        this.car.options.wheelMaxSuspensionForce = 100000\r\n        this.car.options.wheelRollInfluence =  0.01\r\n        this.car.options.wheelMaxSuspensionTravel = 0.3\r\n        this.car.options.wheelCustomSlidingRotationalSpeed = - 30\r\n        this.car.options.wheelMass = 5\r\n        this.car.options.controlsSteeringSpeed = 0.005 * 3\r\n        this.car.options.controlsSteeringMax = Math.PI * 0.17\r\n        this.car.options.controlsSteeringQuad = false\r\n        this.car.options.controlsAcceleratinMaxSpeed = 0.055 * 3 / 17\r\n        this.car.options.controlsAcceleratinMaxSpeedBoost = 0.11 * 3 / 17\r\n        this.car.options.controlsAcceleratingSpeed = 2 * 4 * 2\r\n        this.car.options.controlsAcceleratingSpeedBoost = 3.5 * 4 * 2\r\n        this.car.options.controlsAcceleratingQuad = true\r\n        this.car.options.controlsBrakeStrength = 0.45 * 3\r\n\r\n        /**\r\n         * Upsize down\r\n         */\r\n        this.car.upsideDown = {}\r\n        this.car.upsideDown.state = 'watching' // 'wathing' | 'pending' | 'turning'\r\n        this.car.upsideDown.pendingTimeout = null\r\n        this.car.upsideDown.turningTimeout = null\r\n\r\n        /**\r\n         * Jump\r\n         */\r\n        this.car.jump = (_toReturn = true, _strength = 150) =>\r\n        {\r\n            let worldPosition = this.car.chassis.body.position\r\n            worldPosition = worldPosition.vadd(new CANNON.Vec3(_toReturn ? 0.1 : 0, 0, 0))\r\n            this.car.chassis.body.applyImpulse(new CANNON.Vec3(0, 0, _strength), worldPosition)\r\n        }\r\n\r\n        /**\r\n         * Create method\r\n         */\r\n        this.car.create = () =>\r\n        {\r\n            /**\r\n             * Chassis\r\n             */\r\n            this.car.chassis = {}\r\n\r\n            this.car.chassis.shape = new CANNON.Box(new CANNON.Vec3(this.car.options.chassisDepth * 0.5, this.car.options.chassisWidth * 0.5, this.car.options.chassisHeight * 0.5))\r\n\r\n            this.car.chassis.body = new CANNON.Body({ mass: this.car.options.chassisMass })\r\n            this.car.chassis.body.allowSleep = false\r\n            this.car.chassis.body.position.set(0, 0, 12)\r\n            this.car.chassis.body.sleep()\r\n            this.car.chassis.body.addShape(this.car.chassis.shape, this.car.options.chassisOffset)\r\n            this.car.chassis.body.quaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 1), - Math.PI * 0.5)\r\n\r\n            /**\r\n             * Sound\r\n             */\r\n            this.car.chassis.body.addEventListener('collide', (_event) =>\r\n            {\r\n                if(_event.body.mass === 0)\r\n                {\r\n                    const relativeVelocity = _event.contact.getImpactVelocityAlongNormal()\r\n                    this.sounds.play('carHit', relativeVelocity)\r\n                }\r\n            })\r\n\r\n            /**\r\n             * Vehicle\r\n             */\r\n            this.car.vehicle = new CANNON.RaycastVehicle({\r\n                chassisBody: this.car.chassis.body\r\n            })\r\n\r\n            /**\r\n             * Wheel\r\n             */\r\n            this.car.wheels = {}\r\n            this.car.wheels.options = {\r\n                radius: this.car.options.wheelRadius,\r\n                height: this.car.options.wheelHeight,\r\n                suspensionStiffness: this.car.options.wheelSuspensionStiffness,\r\n                suspensionRestLength: this.car.options.wheelSuspensionRestLength,\r\n                frictionSlip: this.car.options.wheelFrictionSlip,\r\n                dampingRelaxation: this.car.options.wheelDampingRelaxation,\r\n                dampingCompression: this.car.options.wheelDampingCompression,\r\n                maxSuspensionForce: this.car.options.wheelMaxSuspensionForce,\r\n                rollInfluence: this.car.options.wheelRollInfluence,\r\n                maxSuspensionTravel: this.car.options.wheelMaxSuspensionTravel,\r\n                customSlidingRotationalSpeed: this.car.options.wheelCustomSlidingRotationalSpeed,\r\n                useCustomSlidingRotationalSpeed: true,\r\n                directionLocal: new CANNON.Vec3(0, 0, - 1),\r\n                axleLocal: new CANNON.Vec3(0, 1, 0),\r\n                chassisConnectionPointLocal: new CANNON.Vec3(1, 1, 0) // Will be changed for each wheel\r\n            }\r\n\r\n            // Front left\r\n            this.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelFrontOffsetDepth, this.car.options.wheelOffsetWidth, 0)\r\n            this.car.vehicle.addWheel(this.car.wheels.options)\r\n\r\n            // Front right\r\n            this.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelFrontOffsetDepth, - this.car.options.wheelOffsetWidth, 0)\r\n            this.car.vehicle.addWheel(this.car.wheels.options)\r\n\r\n            // Back left\r\n            this.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelBackOffsetDepth, this.car.options.wheelOffsetWidth, 0)\r\n            this.car.vehicle.addWheel(this.car.wheels.options)\r\n\r\n            // Back right\r\n            this.car.wheels.options.chassisConnectionPointLocal.set(this.car.options.wheelBackOffsetDepth, - this.car.options.wheelOffsetWidth, 0)\r\n            this.car.vehicle.addWheel(this.car.wheels.options)\r\n\r\n            this.car.vehicle.addToWorld(this.world)\r\n\r\n            this.car.wheels.indexes = {}\r\n\r\n            this.car.wheels.indexes.frontLeft = 0\r\n            this.car.wheels.indexes.frontRight = 1\r\n            this.car.wheels.indexes.backLeft = 2\r\n            this.car.wheels.indexes.backRight = 3\r\n            this.car.wheels.bodies = []\r\n\r\n            for(const _wheelInfos of this.car.vehicle.wheelInfos)\r\n            {\r\n                const shape = new CANNON.Cylinder(_wheelInfos.radius, _wheelInfos.radius, this.car.wheels.options.height, 20)\r\n                const body = new CANNON.Body({ mass: this.car.options.wheelMass, material: this.materials.items.wheel })\r\n                const quaternion = new CANNON.Quaternion()\r\n                quaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), Math.PI / 2)\r\n\r\n                body.type = CANNON.Body.KINEMATIC\r\n\r\n                body.addShape(shape, new CANNON.Vec3(), quaternion)\r\n                this.car.wheels.bodies.push(body)\r\n            }\r\n\r\n            /**\r\n             * Model\r\n             */\r\n            this.car.model = {}\r\n            this.car.model.container = new THREE.Object3D()\r\n            this.models.container.add(this.car.model.container)\r\n\r\n            this.car.model.material = new THREE.MeshBasicMaterial({ color: 0xffffff, wireframe: true })\r\n\r\n            this.car.model.chassis = new THREE.Mesh(new THREE.BoxGeometry(this.car.options.chassisDepth, this.car.options.chassisWidth, this.car.options.chassisHeight), this.car.model.material)\r\n            this.car.model.container.add(this.car.model.chassis)\r\n\r\n            this.car.model.wheels = []\r\n\r\n            const wheelGeometry = new THREE.CylinderGeometry(this.car.options.wheelRadius, this.car.options.wheelRadius, this.car.options.wheelHeight, 8, 1)\r\n\r\n            for(let i = 0; i < 4; i++)\r\n            {\r\n                const wheel = new THREE.Mesh(wheelGeometry, this.car.model.material)\r\n                this.car.model.container.add(wheel)\r\n                this.car.model.wheels.push(wheel)\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Destroy method\r\n         */\r\n        this.car.destroy = () =>\r\n        {\r\n            this.car.vehicle.removeFromWorld(this.world)\r\n            this.models.container.remove(this.car.model.container)\r\n        }\r\n\r\n        /**\r\n         * Recreate method\r\n         */\r\n        this.car.recreate = () =>\r\n        {\r\n            this.car.destroy()\r\n            this.car.create()\r\n            this.car.chassis.body.wakeUp()\r\n        }\r\n\r\n        /**\r\n         * Brake\r\n         */\r\n        this.car.brake = () =>\r\n        {\r\n            this.car.vehicle.setBrake(1, 0)\r\n            this.car.vehicle.setBrake(1, 1)\r\n            this.car.vehicle.setBrake(1, 2)\r\n            this.car.vehicle.setBrake(1, 3)\r\n        }\r\n\r\n        /**\r\n         * Unbrake\r\n         */\r\n        this.car.unbrake = () =>\r\n        {\r\n            this.car.vehicle.setBrake(0, 0)\r\n            this.car.vehicle.setBrake(0, 1)\r\n            this.car.vehicle.setBrake(0, 2)\r\n            this.car.vehicle.setBrake(0, 3)\r\n        }\r\n\r\n        /**\r\n         * Actions\r\n         */\r\n        this.controls.on('action', (_name) =>\r\n        {\r\n            switch(_name)\r\n            {\r\n                case 'reset':\r\n                    this.car.recreate()\r\n                    break\r\n            }\r\n        })\r\n\r\n        /**\r\n         * Cannon tick\r\n         */\r\n        this.world.addEventListener('postStep', () =>\r\n        {\r\n            // Update speed\r\n            let positionDelta = new CANNON.Vec3()\r\n            positionDelta = positionDelta.copy(this.car.chassis.body.position)\r\n            positionDelta = positionDelta.vsub(this.car.oldPosition)\r\n\r\n            this.car.oldPosition.copy(this.car.chassis.body.position)\r\n            this.car.speed = positionDelta.length() / this.time.delta\r\n\r\n            // Update forward\r\n            const localForward = new CANNON.Vec3(1, 0, 0)\r\n            this.car.chassis.body.vectorToWorldFrame(localForward, this.car.worldForward)\r\n            this.car.angle = Math.atan2(this.car.worldForward.y, this.car.worldForward.x)\r\n\r\n            this.car.forwardSpeed = this.car.worldForward.dot(positionDelta)\r\n            this.car.goingForward = this.car.forwardSpeed > 0\r\n\r\n            // Updise down\r\n            const localUp = new CANNON.Vec3(0, 0, 1)\r\n            const worldUp = new CANNON.Vec3()\r\n            this.car.chassis.body.vectorToWorldFrame(localUp, worldUp)\r\n\r\n            if(worldUp.dot(localUp) < 0.5)\r\n            {\r\n                if(this.car.upsideDown.state === 'watching')\r\n                {\r\n                    this.car.upsideDown.state = 'pending'\r\n                    this.car.upsideDown.pendingTimeout = window.setTimeout(() =>\r\n                    {\r\n                        this.car.upsideDown.state = 'turning'\r\n                        this.car.jump(true)\r\n\r\n                        this.car.upsideDown.turningTimeout = window.setTimeout(() =>\r\n                        {\r\n                            this.car.upsideDown.state = 'watching'\r\n                        }, 1000)\r\n                    }, 1000)\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if(this.car.upsideDown.state === 'pending')\r\n                {\r\n                    this.car.upsideDown.state = 'watching'\r\n                    window.clearTimeout(this.car.upsideDown.pendingTimeout)\r\n                }\r\n            }\r\n\r\n            // Update wheel bodies\r\n            for(let i = 0; i < this.car.vehicle.wheelInfos.length; i++)\r\n            {\r\n                this.car.vehicle.updateWheelTransform(i)\r\n\r\n                const transform = this.car.vehicle.wheelInfos[i].worldTransform\r\n                this.car.wheels.bodies[i].position.copy(transform.position)\r\n                this.car.wheels.bodies[i].quaternion.copy(transform.quaternion)\r\n\r\n                // Rotate the wheels on the right\r\n                if(i === 1 || i === 3)\r\n                {\r\n                    const rotationQuaternion = new CANNON.Quaternion(0, 0, 0, 1)\r\n                    rotationQuaternion.setFromAxisAngle(new CANNON.Vec3(0, 0, 1), Math.PI)\r\n                    this.car.wheels.bodies[i].quaternion = this.car.wheels.bodies[i].quaternion.mult(rotationQuaternion)\r\n                }\r\n            }\r\n\r\n            // Slow down back\r\n            if(!this.controls.actions.up && !this.controls.actions.down)\r\n            {\r\n                let slowDownForce = this.car.worldForward.clone()\r\n\r\n                if(this.car.goingForward)\r\n                {\r\n                    slowDownForce = slowDownForce.negate()\r\n                }\r\n\r\n                slowDownForce = slowDownForce.scale(this.car.chassis.body.velocity.length() * 0.1)\r\n\r\n                this.car.chassis.body.applyImpulse(slowDownForce, this.car.chassis.body.position)\r\n            }\r\n        })\r\n\r\n        /**\r\n         * Time tick\r\n         */\r\n        this.time.on('tick', () =>\r\n        {\r\n            /**\r\n             * Body\r\n             */\r\n            // Update chassis model\r\n            this.car.model.chassis.position.copy(this.car.chassis.body.position).add(this.car.options.chassisOffset)\r\n            this.car.model.chassis.quaternion.copy(this.car.chassis.body.quaternion)\r\n\r\n            // Update wheel models\r\n            for(const _wheelKey in this.car.wheels.bodies)\r\n            {\r\n                const wheelBody = this.car.wheels.bodies[_wheelKey]\r\n                const wheelMesh = this.car.model.wheels[_wheelKey]\r\n\r\n                wheelMesh.position.copy(wheelBody.position)\r\n                wheelMesh.quaternion.copy(wheelBody.quaternion)\r\n            }\r\n\r\n            /**\r\n             * Steering\r\n             */\r\n            if(this.controls.touch)\r\n            {\r\n                let deltaAngle = 0\r\n\r\n                if(this.controls.touch.joystick.active)\r\n                {\r\n                    // Calculate delta between joystick and car angles\r\n                    deltaAngle = (this.controls.touch.joystick.angle.value - this.car.angle + Math.PI) % (Math.PI * 2) - Math.PI\r\n                    deltaAngle = deltaAngle < - Math.PI ? deltaAngle + Math.PI * 2 : deltaAngle\r\n                }\r\n\r\n                // Update steering directly\r\n                const goingForward = Math.abs(this.car.forwardSpeed) < 0.01 ? true : this.car.goingForward\r\n                this.car.steering = deltaAngle * (goingForward ? - 1 : 1)\r\n\r\n                // Clamp steer\r\n                if(Math.abs(this.car.steering) > this.car.options.controlsSteeringMax)\r\n                {\r\n                    this.car.steering = Math.sign(this.car.steering) * this.car.options.controlsSteeringMax\r\n                }\r\n            }\r\n\r\n            if(!this.controls.touch || !this.controls.touch.joystick.active)\r\n            {\r\n                const steerStrength = this.time.delta * this.car.options.controlsSteeringSpeed\r\n\r\n                // Steer right\r\n                if(this.controls.actions.right)\r\n                {\r\n                    this.car.steering += steerStrength\r\n                }\r\n                // Steer left\r\n                else if(this.controls.actions.left)\r\n                {\r\n                    this.car.steering -= steerStrength\r\n                }\r\n                // Steer center\r\n                else\r\n                {\r\n                    if(Math.abs(this.car.steering) > steerStrength)\r\n                    {\r\n                        this.car.steering -= steerStrength * Math.sign(this.car.steering)\r\n                    }\r\n                    else\r\n                    {\r\n                        this.car.steering = 0\r\n                    }\r\n                }\r\n\r\n                // Clamp steer\r\n                if(Math.abs(this.car.steering) > this.car.options.controlsSteeringMax)\r\n                {\r\n                    this.car.steering = Math.sign(this.car.steering) * this.car.options.controlsSteeringMax\r\n                }\r\n            }\r\n\r\n            // Update wheels\r\n            this.car.vehicle.setSteeringValue(- this.car.steering, this.car.wheels.indexes.frontLeft)\r\n            this.car.vehicle.setSteeringValue(- this.car.steering, this.car.wheels.indexes.frontRight)\r\n\r\n            if(this.car.options.controlsSteeringQuad)\r\n            {\r\n                this.car.vehicle.setSteeringValue(this.car.steering, this.car.wheels.indexes.backLeft)\r\n                this.car.vehicle.setSteeringValue(this.car.steering, this.car.wheels.indexes.backRight)\r\n            }\r\n\r\n            /**\r\n             * Accelerate\r\n             */\r\n            const accelerationSpeed = this.controls.actions.boost ? this.car.options.controlsAcceleratingSpeedBoost : this.car.options.controlsAcceleratingSpeed\r\n            const accelerateStrength = 17 * accelerationSpeed\r\n            const controlsAcceleratinMaxSpeed = this.controls.actions.boost ? this.car.options.controlsAcceleratinMaxSpeedBoost : this.car.options.controlsAcceleratinMaxSpeed\r\n\r\n            // Accelerate up\r\n            if(this.controls.actions.up)\r\n            {\r\n                if(this.car.speed < controlsAcceleratinMaxSpeed || !this.car.goingForward)\r\n                {\r\n                    this.car.accelerating = accelerateStrength\r\n                }\r\n                else\r\n                {\r\n                    this.car.accelerating = 0\r\n                }\r\n            }\r\n\r\n            // Accelerate Down\r\n            else if(this.controls.actions.down)\r\n            {\r\n                if(this.car.speed < controlsAcceleratinMaxSpeed || this.car.goingForward)\r\n                {\r\n                    this.car.accelerating = - accelerateStrength\r\n                }\r\n                else\r\n                {\r\n                    this.car.accelerating = 0\r\n                }\r\n            }\r\n            else\r\n            {\r\n                this.car.accelerating = 0\r\n            }\r\n\r\n            this.car.vehicle.applyEngineForce(- this.car.accelerating, this.car.wheels.indexes.backLeft)\r\n            this.car.vehicle.applyEngineForce(- this.car.accelerating, this.car.wheels.indexes.backRight)\r\n\r\n            if(this.car.options.controlsSteeringQuad)\r\n            {\r\n                this.car.vehicle.applyEngineForce(- this.car.accelerating, this.car.wheels.indexes.frontLeft)\r\n                this.car.vehicle.applyEngineForce(- this.car.accelerating, this.car.wheels.indexes.frontRight)\r\n            }\r\n\r\n            /**\r\n             * Brake\r\n             */\r\n            if(this.controls.actions.brake)\r\n            {\r\n                this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength, 0)\r\n                this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength, 1)\r\n                this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength, 2)\r\n                this.car.vehicle.setBrake(this.car.options.controlsBrakeStrength, 3)\r\n            }\r\n            else\r\n            {\r\n                this.car.vehicle.setBrake(0, 0)\r\n                this.car.vehicle.setBrake(0, 1)\r\n                this.car.vehicle.setBrake(0, 2)\r\n                this.car.vehicle.setBrake(0, 3)\r\n            }\r\n        })\r\n\r\n        // Create the initial car\r\n        this.car.create()\r\n\r\n        // Debug\r\n        if(this.debug)\r\n        {\r\n            this.car.debugFolder = this.debugFolder.addFolder('car')\r\n            this.car.debugFolder.open()\r\n\r\n            this.car.debugFolder.add(this.car.options, 'chassisWidth').step(0.001).min(0).max(5).name('chassisWidth').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'chassisHeight').step(0.001).min(0).max(5).name('chassisHeight').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'chassisDepth').step(0.001).min(0).max(5).name('chassisDepth').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options.chassisOffset, 'z').step(0.001).min(0).max(5).name('chassisOffset').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'chassisMass').step(0.001).min(0).max(1000).name('chassisMass').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelFrontOffsetDepth').step(0.001).min(0).max(5).name('wheelFrontOffsetDepth').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelBackOffsetDepth').step(0.001).min(- 5).max(0).name('wheelBackOffsetDepth').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelOffsetWidth').step(0.001).min(0).max(5).name('wheelOffsetWidth').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelRadius').step(0.001).min(0).max(2).name('wheelRadius').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelHeight').step(0.001).min(0).max(2).name('wheelHeight').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelSuspensionStiffness').step(0.001).min(0).max(300).name('wheelSuspensionStiffness').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelSuspensionRestLength').step(0.001).min(0).max(5).name('wheelSuspensionRestLength').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelFrictionSlip').step(0.001).min(0).max(30).name('wheelFrictionSlip').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelDampingRelaxation').step(0.001).min(0).max(30).name('wheelDampingRelaxation').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelDampingCompression').step(0.001).min(0).max(30).name('wheelDampingCompression').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelMaxSuspensionForce').step(0.001).min(0).max(1000000).name('wheelMaxSuspensionForce').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelRollInfluence').step(0.001).min(0).max(1).name('wheelRollInfluence').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelMaxSuspensionTravel').step(0.001).min(0).max(5).name('wheelMaxSuspensionTravel').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelCustomSlidingRotationalSpeed').step(0.001).min(- 45).max(45).name('wheelCustomSlidingRotationalSpeed').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'wheelMass').step(0.001).min(0).max(1000).name('wheelMass').onFinishChange(this.car.recreate)\r\n            this.car.debugFolder.add(this.car.options, 'controlsSteeringSpeed').step(0.001).min(0).max(0.1).name('controlsSteeringSpeed')\r\n            this.car.debugFolder.add(this.car.options, 'controlsSteeringMax').step(0.001).min(0).max(Math.PI * 0.5).name('controlsSteeringMax')\r\n            this.car.debugFolder.add(this.car.options, 'controlsSteeringQuad').name('controlsSteeringQuad')\r\n            this.car.debugFolder.add(this.car.options, 'controlsAcceleratingSpeed').step(0.001).min(0).max(30).name('controlsAcceleratingSpeed')\r\n            this.car.debugFolder.add(this.car.options, 'controlsAcceleratingSpeedBoost').step(0.001).min(0).max(30).name('controlsAcceleratingSpeedBoost')\r\n            this.car.debugFolder.add(this.car.options, 'controlsAcceleratingQuad').name('controlsAcceleratingQuad')\r\n            this.car.debugFolder.add(this.car.options, 'controlsBrakeStrength').step(0.001).min(0).max(5).name('controlsBrakeStrength')\r\n            this.car.debugFolder.add(this.car, 'recreate')\r\n            this.car.debugFolder.add(this.car, 'jump')\r\n        }\r\n    }\r\n\r\n    addObjectFromThree(_options)\r\n    {\r\n        // Set up\r\n        const collision = {}\r\n\r\n        collision.model = {}\r\n        collision.model.meshes = []\r\n        collision.model.container = new THREE.Object3D()\r\n        this.models.container.add(collision.model.container)\r\n\r\n        collision.children = []\r\n\r\n        // Material\r\n        const bodyMaterial = this.materials.items.dummy\r\n\r\n        // Body\r\n        collision.body = new CANNON.Body({\r\n            position: new CANNON.Vec3(_options.offset.x, _options.offset.y, _options.offset.z),\r\n            mass: _options.mass,\r\n            material: bodyMaterial\r\n        })\r\n        collision.body.allowSleep = true\r\n        collision.body.sleepSpeedLimit = 0.01\r\n        if(_options.sleep)\r\n        {\r\n            collision.body.sleep()\r\n        }\r\n\r\n        this.world.addBody(collision.body)\r\n\r\n        // Rotation\r\n        if(_options.rotation)\r\n        {\r\n            const rotationQuaternion = new CANNON.Quaternion()\r\n            rotationQuaternion.setFromEuler(_options.rotation.x, _options.rotation.y, _options.rotation.z, _options.rotation.order)\r\n            collision.body.quaternion = collision.body.quaternion.mult(rotationQuaternion)\r\n        }\r\n\r\n        // Center\r\n        collision.center = new CANNON.Vec3(0, 0, 0)\r\n\r\n        // Shapes\r\n        const shapes = []\r\n\r\n        // Each mesh\r\n        for(let i = 0; i < _options.meshes.length; i++)\r\n        {\r\n            const mesh = _options.meshes[i]\r\n\r\n            // Define shape\r\n            let shape = null\r\n\r\n            if(mesh.name.match(/^cube_?[0-9]{0,3}?|box[0-9]{0,3}?$/i))\r\n            {\r\n                shape = 'box'\r\n            }\r\n            else if(mesh.name.match(/^cylinder_?[0-9]{0,3}?$/i))\r\n            {\r\n                shape = 'cylinder'\r\n            }\r\n            else if(mesh.name.match(/^sphere_?[0-9]{0,3}?$/i))\r\n            {\r\n                shape = 'sphere'\r\n            }\r\n            else if(mesh.name.match(/^center_?[0-9]{0,3}?$/i))\r\n            {\r\n                shape = 'center'\r\n            }\r\n\r\n            // Shape is the center\r\n            if(shape === 'center')\r\n            {\r\n                collision.center.set(mesh.position.x, mesh.position.y, mesh.position.z)\r\n            }\r\n\r\n            // Other shape\r\n            else if(shape)\r\n            {\r\n                // Geometry\r\n                let shapeGeometry = null\r\n\r\n                if(shape === 'cylinder')\r\n                {\r\n                    shapeGeometry = new CANNON.Cylinder(mesh.scale.x, mesh.scale.x, mesh.scale.z, 8)\r\n                }\r\n                else if(shape === 'box')\r\n                {\r\n                    const halfExtents = new CANNON.Vec3(mesh.scale.x * 0.5, mesh.scale.y * 0.5, mesh.scale.z * 0.5)\r\n                    shapeGeometry = new CANNON.Box(halfExtents)\r\n                }\r\n                else if(shape === 'sphere')\r\n                {\r\n                    shapeGeometry = new CANNON.Sphere(mesh.scale.x)\r\n                }\r\n\r\n                // Position\r\n                const shapePosition = new CANNON.Vec3(mesh.position.x, mesh.position.y, mesh.position.z)\r\n\r\n                // Quaternion\r\n                const shapeQuaternion = new CANNON.Quaternion(mesh.quaternion.x, mesh.quaternion.y, mesh.quaternion.z, mesh.quaternion.w)\r\n                if(shape === 'cylinder')\r\n                {\r\n                    // Rotate cylinder\r\n                    // shapeQuaternion.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), - Math.PI * 0.5)\r\n                }\r\n\r\n                // Save\r\n                shapes.push({ shapeGeometry, shapePosition, shapeQuaternion })\r\n\r\n                // Create model object\r\n                let modelGeometry = null\r\n                if(shape === 'cylinder')\r\n                {\r\n                    modelGeometry = new THREE.CylinderGeometry(1, 1, 1, 8, 1)\r\n                    modelGeometry.rotateX(Math.PI * 0.5)\r\n                }\r\n                else if(shape === 'box')\r\n                {\r\n                    modelGeometry = new THREE.BoxGeometry(1, 1, 1)\r\n                }\r\n                else if(shape === 'sphere')\r\n                {\r\n                    modelGeometry = new THREE.SphereGeometry(1, 8, 8)\r\n                }\r\n\r\n                const modelMesh = new THREE.Mesh(modelGeometry, this.models.materials[_options.mass === 0 ? 'static' : 'dynamic'])\r\n                modelMesh.position.copy(mesh.position)\r\n                modelMesh.scale.copy(mesh.scale)\r\n                modelMesh.quaternion.copy(mesh.quaternion)\r\n\r\n                collision.model.meshes.push(modelMesh)\r\n            }\r\n        }\r\n\r\n        // Update meshes to match center\r\n        for(const _mesh of collision.model.meshes)\r\n        {\r\n            _mesh.position.x -= collision.center.x\r\n            _mesh.position.y -= collision.center.y\r\n            _mesh.position.z -= collision.center.z\r\n\r\n            collision.model.container.add(_mesh)\r\n        }\r\n\r\n        // Update shapes to match center\r\n        for(const _shape of shapes)\r\n        {\r\n            // Create physic object\r\n            _shape.shapePosition.x -= collision.center.x\r\n            _shape.shapePosition.y -= collision.center.y\r\n            _shape.shapePosition.z -= collision.center.z\r\n\r\n            collision.body.addShape(_shape.shapeGeometry, _shape.shapePosition, _shape.shapeQuaternion)\r\n        }\r\n\r\n        // Update body to match center\r\n        collision.body.position.x += collision.center.x\r\n        collision.body.position.y += collision.center.y\r\n        collision.body.position.z += collision.center.z\r\n\r\n        // Save origin\r\n        collision.origin = {}\r\n        collision.origin.position = collision.body.position.clone()\r\n        collision.origin.quaternion = collision.body.quaternion.clone()\r\n        collision.origin.sleep = _options.sleep\r\n\r\n        // Time tick update\r\n        this.time.on('tick', () =>\r\n        {\r\n            collision.model.container.position.set(collision.body.position.x, collision.body.position.y, collision.body.position.z)\r\n            collision.model.container.quaternion.set(collision.body.quaternion.x, collision.body.quaternion.y, collision.body.quaternion.z, collision.body.quaternion.w)\r\n\r\n            if(this.models.container.visible && _options.mass > 0)\r\n            {\r\n                for(const _mesh of collision.model.container.children)\r\n                {\r\n                    _mesh.material = collision.body.sleepState === 2 ? this.models.materials.dynamicSleeping : this.models.materials.dynamic\r\n                }\r\n            }\r\n        })\r\n\r\n        // Reset\r\n        collision.reset = () =>\r\n        {\r\n            collision.body.position.copy(collision.origin.position)\r\n            collision.body.quaternion.copy(collision.origin.quaternion)\r\n\r\n            if(collision.origin.sleep)\r\n            {\r\n                collision.body.sleep()\r\n            }\r\n        }\r\n\r\n        return collision\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}